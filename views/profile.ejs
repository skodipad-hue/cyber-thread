<!DOCTYPE html>
<html>
<head>
  <title>Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-black text-gray-200 min-h-screen font-mono">

<div class="max-w-2xl mx-auto p-8 mt-6 bg-[#12121a] border border-cyan-400/30 rounded-xl shadow-xl">

  <h1 class="text-3xl text-cyan-400 font-bold">@<%= user.username %></h1>
  <p class="text-gray-400 mb-4"><%= user.email %></p>

  <!-- PROFILE IMAGE -->
  <div class="flex flex-col items-center mb-6">

    <div class="w-36 h-36 rounded-full border-2 border-cyan-400/40
                bg-black flex items-center justify-center overflow-hidden shadow-lg">
      <% if (user.profile_url) { %>
        <img src="<%= user.profile_url %>" class="w-full h-full object-cover">
      <% } else { %>
        <span class="text-gray-500 text-sm">No Profile Image</span>
      <% } %>
    </div>

    <!-- UPLOAD -->
    <form action="/profile/<%= user.id %>/photo"
          method="POST"
          enctype="multipart/form-data"
          class="mt-4 text-center">

      <div id="dropBox"
           class="border-2 border-dashed border-cyan-400/40
                  rounded-xl px-6 py-4 cursor-pointer
                  hover:bg-cyan-400/10 transition">
        <p class="text-cyan-400 font-bold">Drag & Drop Profile Image</p>
        <p class="text-gray-400 text-sm">or click to browse</p>

        <input type="file"
               name="profileImage"
               id="fileInput"
               accept="image/*"
               hidden>
      </div>

      <button class="mt-3 px-5 py-2 bg-cyan-400 text-black rounded font-bold">
        Upload Profile Photo
      </button>
    </form>
  </div>

  <!-- BIO -->
  <% if (!user.bio) { %>
    <p class="text-red-400 mb-3">No bio added yet</p>
  <% } else { %>
    <p class="text-gray-300 mb-3"><%= user.bio %></p>
  <% } %>

  <button onclick="openBioModal()"
          class="bg-cyan-400 text-black px-4 py-1 rounded font-bold">
    Edit Bio
  </button>

  <a href="/users/<%= user.id %>/posts"
     class="block mt-6 text-cyan-400 underline">
    ‚Üê Back to Feed
  </a>

</div>

<!-- DRAG & DROP SCRIPT -->
<script>
  const box = document.getElementById("dropBox");
  const input = document.getElementById("fileInput");

  box.onclick = () => input.click();

  box.addEventListener("dragover", e => {
    e.preventDefault();
    box.classList.add("bg-cyan-400/10");
  });

  box.addEventListener("dragleave", () => {
    box.classList.remove("bg-cyan-400/10");
  });

  box.addEventListener("drop", e => {
    e.preventDefault();
    input.files = e.dataTransfer.files;
    box.classList.remove("bg-cyan-400/10");
  });
</script>

</body>
</html>
