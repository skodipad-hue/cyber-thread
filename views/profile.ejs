<!DOCTYPE html>
<html>
<head>
  <title>Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .drag-area {
      border: 2px dashed #00f6ff77;
      padding: 20px;
      border-radius: 12px;
      cursor: pointer;
      text-align: center;
    }
    .drag-area.dragover {
      background-color: #00f6ff22;
    }
  </style>
</head>

<body class="bg-black text-gray-200 min-h-screen font-mono">

<div class="max-w-2xl mx-auto p-8 mt-6 bg-[#12121a] border border-cyan-400/30 rounded-xl shadow-xl">

  <!-- PROFILE HEADER -->
  <div class="flex gap-6 items-center">

    <!-- PROFILE IMAGE -->
    <div class="w-32 h-32 rounded-full border border-cyan-400/40 flex items-center justify-center bg-black overflow-hidden">
      <% if (user.profile_url) { %>
        <img src="<%= user.profile_url %>" class="w-full h-full object-cover">
      <% } else { %>
        <span class="text-gray-500 text-sm">No Profile Image</span>
      <% } %>
    </div>

    <div>
      <h1 class="text-3xl text-cyan-400 font-bold">@<%= user.username %></h1>
      <p class="text-gray-400"><%= user.email %></p>
    </div>
  </div>

  <!-- UPLOAD PROFILE PHOTO -->
  <form method="POST" action="/profile/<%= user.id %>/photo" enctype="multipart/form-data" class="mt-6">

    <div id="profileDrag" class="drag-area">
      <p>Drag & Drop Profile Image</p>
      <p class="text-gray-400 text-sm">or click to browse</p>
      <input type="file" name="profileImage" id="profileInput" accept="image/*" class="hidden">
    </div>

    <button class="mt-4 bg-cyan-400 text-black px-4 py-2 rounded font-bold">
      Upload Profile Photo
    </button>
  </form>

  <a href="/users/<%= user.id %>/posts" class="block mt-6 text-cyan-400 underline">
    ← Back to Feed
  </a>

</div>

<script>
const box = document.getElementById("profileDrag");
const input = document.getElementById("profileInput");

box.onclick = () => input.click();

box.addEventListener("dragover", e => {
  e.preventDefault();
  box.classList.add("dragover");
});

box.addEventListener("dragleave", () => box.classList.remove("dragover"));

box.addEventListener("drop", e => {
  e.preventDefault();
  box.classList.remove("dragover");
  input.files = e.dataTransfer.files;
  box.querySelector("p").textContent = "Image Selected ✔";
});
</script>

</body>
</html>
