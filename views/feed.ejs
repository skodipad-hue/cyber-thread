<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Feed</title>

<script src="https://cdn.tailwindcss.com"></script>

<script>
tailwind.config = {
  darkMode: "class",
  theme: {
    extend: {
      colors: {
        twitterBg: "#f5f9fc",
        twitterCard: "#ffffff",
        twitterBorder: "#e5eff6",
        twitterBlue: "#1d9bf0",
        twitterHover: "#e8f3ff",
        twitterText: "#0f172a",
        twitterMuted: "#64748b",

        darkBg: "#0f1419",
        darkCard: "#161b22",
        darkBorder: "#232a31",
        darkText: "#e6edf3",
        darkMuted: "#8b949e"
      }
    }
  }
}
</script>
</head>

<body class="bg-twitterBg dark:bg-darkBg text-twitterText dark:text-darkText font-sans min-h-screen">

<!-- ================= HEADER ================= -->
<header class="bg-white dark:bg-darkBg border-b border-twitterBorder dark:border-darkBorder">
  <div
    class="max-w-7xl mx-auto
           px-4 py-5 sm:py-4
           grid grid-cols-3 items-center">

    <!-- LEFT: LOGOUT -->
    <a href="/login"
       style="padding:12px 18px;font-size:15px"
       class="justify-self-start
              bg-red-500 text-white rounded-full font-semibold
              hover:bg-red-400 transition
              sm:px-4 sm:py-2 sm:text-sm">
      Logout
    </a>

    <!-- CENTER: TITLE + TOGGLE (DESKTOP ONLY) -->
    <div class="text-center leading-tight flex flex-col items-center gap-1">

      <div
        style="font-size:24px;letter-spacing:2px"
        class="sm:text-xl font-bold text-twitterBlue uppercase">
        CYBER
      </div>

      <div
        style="font-size:20px;letter-spacing:2px"
        class="sm:text-sm font-semibold text-twitterBlue uppercase">
        THREADS
      </div>

      <!-- DESKTOP TOGGLE -->
      <button id="themeToggleDesktop"
        class="hidden sm:flex mt-2 p-2 rounded-full
               hover:bg-twitterHover dark:hover:bg-white/10
               transition">
        <span class="sun text-lg">‚òÄÔ∏è</span>
        <span class="moon text-lg hidden">üåô</span>
      </button>

    </div>

    <!-- RIGHT: PROFILE -->
    <a href="/profile/<%= userId %>"
       style="padding:12px 18px;font-size:15px"
       class="justify-self-end
              bg-twitterBlue text-white rounded-full font-semibold
              hover:bg-[#1a8cd8] transition
              sm:px-4 sm:py-2 sm:text-sm">
      Profile
    </a>

  </div>
</header>

<!-- ================= FEED ================= -->
<section class="max-w-7xl mx-auto px-4 mt-4 pb-24">

  <% posts.forEach(post => { %>

  <div class="w-full sm:w-[48%] lg:w-[31%] sm:inline-block sm:mr-4 mb-5 align-top">

    <div class="bg-twitterCard dark:bg-darkCard
                border border-twitterBorder dark:border-darkBorder
                rounded-2xl shadow-sm hover:shadow-md transition">

      <a href="/posts/<%= post.id %>" class="block">

        <div style="padding:18px 20px 10px"
             class="flex justify-between items-start">
          <h3 style="font-size:18px" class="font-semibold">
            @<%= post.username %>
          </h3>
          <small style="font-size:14px"
                 class="text-twitterMuted dark:text-darkMuted whitespace-nowrap">
            <%= post.timeAgo %>
          </small>
        </div>

        <div style="padding:0 20px 20px">
          <p style="font-size:18px;line-height:28px">
            <%= post.content %>
          </p>
        </div>

      </a>

    </div>

  </div>

  <% }) %>

</section>

<!-- ================= FLOATING TOGGLE (MOBILE ONLY) ================= -->
<button id="themeToggleMobile"
  class="fixed bottom-6 right-6 z-50
         sm:hidden
         p-3 rounded-full
         bg-transparent
         hover:bg-twitterHover
         dark:hover:bg-white/10
         transition shadow-md">

  <span class="sun text-xl">‚òÄÔ∏è</span>
  <span class="moon text-xl hidden">üåô</span>
</button>

<!-- ================= THEME SCRIPT ================= -->
<script>
const html = document.documentElement;
const allSun = document.querySelectorAll(".sun");
const allMoon = document.querySelectorAll(".moon");

function syncIcons(isDark) {
  allSun.forEach(s => s.classList.toggle("hidden", isDark));
  allMoon.forEach(m => m.classList.toggle("hidden", !isDark));
}

if (localStorage.theme === "dark") {
  html.classList.add("dark");
  syncIcons(true);
}

function toggleTheme() {
  const isDark = html.classList.toggle("dark");
  syncIcons(isDark);
  localStorage.theme = isDark ? "dark" : "light";
}

document.getElementById("themeToggleDesktop").onclick = toggleTheme;
document.getElementById("themeToggleMobile").onclick = toggleTheme;
</script>

</body>
</html>
